# 🛢️ SQL 개념 설명서

##### 🗓️ 2025.05.19
##### 📝 Writer : Moon19ht

---

## 📚 목차

- [🔚 마무리](#-마무리)
- [⏭️ 다음으로는...](#️-다음으로는)
- [⏮️ 이전 문서](./0516%20SQL정리.md) [다음 문서 ⏭️](./0520%20SQL정리.md)

---

    ## 🔐 제약조건 (Constraints)

### ✅ PRIMARY KEY
- 각 테이블에서 행을 고유하게 식별하는 열
- 자동으로 `NOT NULL` 속성 포함

```sql
CREATE TABLE employees (
  id INT PRIMARY KEY,
  name VARCHAR(50)
);
```

### 🔗 FOREIGN KEY
- 다른 테이블의 기본 키를 참조하는 열
- 테이블 간의 관계를 정의

```sql
CREATE TABLE departments (
  dept_id INT PRIMARY KEY,
  dept_name VARCHAR(50)
);

CREATE TABLE employees (
  id INT PRIMARY KEY,
  name VARCHAR(50),
  dept_id INT,
  FOREIGN KEY (dept_id) REFERENCES departments(dept_id)
);
```

---

## 🔗 JOIN

### 🔸 INNER JOIN
- 양쪽 테이블에 모두 존재하는 데이터만 반환 (교집합)

```sql
SELECT e.name, d.dept_name
FROM employees e
INNER JOIN departments d ON e.dept_id = d.dept_id;
```

### 🔸 LEFT JOIN
- 왼쪽 테이블의 모든 행을 반환하고, 일치하지 않는 오른쪽 테이블의 값은 `NULL`

```sql
SELECT e.name, d.dept_name
FROM employees e
LEFT JOIN departments d ON e.dept_id = d.dept_id;
```

---

## 🔍 서브쿼리 (SubQuery)

### 📦 기본 서브쿼리
- 메인 쿼리 내부에 포함된 쿼리

```sql
SELECT name
FROM employees
WHERE dept_id = (SELECT dept_id FROM departments WHERE dept_name = 'Sales');
```

### 🔁 상관 서브쿼리 (Correlated Subquery)
- 외부 쿼리의 열을 내부 쿼리가 참조함 (행마다 수행)

```sql
SELECT name
FROM employees e
WHERE salary > (
  SELECT AVG(salary)
  FROM employees
  WHERE dept_id = e.dept_id
);
```

---

## 📊 GROUP BY

- 동일한 값을 가진 행들을 그룹으로 묶음
- `SUM()`, `AVG()`, `COUNT()`, `MAX()`, `MIN()` 등의 집계 함수와 함께 사용

```sql
SELECT dept_id, COUNT(*) AS employee_count
FROM employees
GROUP BY dept_id;
```

- 조건을 추가하려면 `HAVING` 사용

```sql
SELECT dept_id, AVG(salary) AS avg_salary
FROM employees
GROUP BY dept_id
HAVING AVG(salary) > 5000;
```


---

## 🔚 마무리



## ⏭️ 다음으로는...
- 

---

[⏮️ 이전 문서](./0516%20SQL정리.md) [다음 문서 ⏭️](./0520%20SQL정리.md)